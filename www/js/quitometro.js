// $( document ).ready(function() {
				
				//DATEPICKER PLUGIN
				$('.nativedatepicker').focus(function(event) {
					var currentField = $(this);
					
					//var currentDate = new Date();
					var currentDate = getDateFromString(currentField.val());
					
					//var myNewDate = Date.parse(currentField.val()) || new Date();
					var myNewDate = currentDate;

					// Same handling for iPhone and Android
					window.plugins.datePicker.show({
						date : myNewDate,
						mode : 'date', // date or time or blank for both
						allowOldDates : true
					}, function(returnDate) {
						var newDate = new Date(returnDate);
						//currentField.val(newDate.toString("dd/MMM/yyyy"));
						currentField.val(formatDateToString(newDate));

						// This fixes the problem you mention at the bottom of this script with it not working a second/third time around, because it is in focus.
						currentField.blur();
					});

				});

				$('.nativetimepicker').focus(function(event) {
					var currentField = $(this);
					var time = currentField.val();
					var myNewTime = new Date();

					myNewTime = getTimeFromString(time);

					// Same handling for iPhone and Android
					plugins.datePicker.show({
						date : myNewTime,
						mode : 'time', // date or time or blank for both
						allowOldDates : true
					}, function(returnDate) {
					  // returnDate is generated by .toLocaleString() in Java so it will be relative to the current time zone
						var newDate = new Date(returnDate);
						//currentField.val(newDate.toString("HH:mm"));
						currentField.val(formatTimeToString(newDate));

						currentField.blur();
					});
				});
				
				
//			});


	// Call onDeviceReady when Cordova is loaded.
    //
    // At this point, the document has loaded but cordova-1.7.0.js has not.
    // When Cordova is loaded and talking with the native device,
    // it will call the event `deviceready`.
    //
    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
        
        //$( "#dialog" ).dialog();
        
    }

    // Cordova is loaded and it is now safe to call Cordova methods
    //
    function onDeviceReady() {
        // Register the event listener
        document.addEventListener("backbutton", onBackKeyDown, false);
        
        updateContadores();
    }

    // Handle the back button
    //
    function onBackKeyDown() {
        //$.mobile.changePage('#dialog','pop',false,true)
        navigator.app.exitApp();
        
    }
    
    
    function loadStatistics() {
		var dQuit = storage.getItem("dQuit");
		if(dQuit != null)
			dQuit = new Date(dQuit);
		var tQuit = storage.getItem("tQuit");
		if(tQuit != null)
			tQuit = new Date(tQuit);
				
		var minutes=1000*60;
		var hours=minutes*60;
		var days=hours*24;
		var weeks=days*7;
		var months=days*30;
		var years=days*365;

		var valPb1,valPb2,valPb3,valPb4,valPb5,valPb6,valPb7,valPb8,valPb9,valPb10,valPb11,valPb12,valPb13 = 0;
				
		if(dQuit != null) {
			if(tQuit != null) {
				dQuit.setHours(tQuit.getHours());
				dQuit.setMinutes(tQuit.getMinutes());
			}
			var dNow = new Date();
			var timeDiff =(dNow.getTime() - dQuit.getTime()); //diferencia en ms
			var staticTimeDiff = timeDiff;
				
					//Sacado de http://www.hola.com/salud/enciclopedia-salud/2010062645544/pulmones/enfermedades-transtornos/los-beneficios-de-dejar-de-fumar/
					//20 mins.La tensión arterial y el pulso se normalizan y se incrementa el flujo sanguíneo.
					var valPb1 = ((timeDiff/minutes)/20)*100;
					//48 h.El monóxido de carbono y la nicotina han desaparecido por completo.
					var valPb2 = ((timeDiff/hours)/48)*100;
					//2-3 dias.Menos mucosidad, o ninguna, en la garganta y los bronquios y con ello, menores dificultades respiratorias.
					var valPb3 = ((timeDiff/days)/3)*100;
					//5-7 dias.Mejoran los sentidos del olfato y el gusto, el aliento es más fresco, los dientes están más limpios y el nivel de energía aumenta.
					var valPb4 = ((timeDiff/days)/7)*100;
					//2-3 sema.El síndrome de abstinencia físico desaparec
					var valPb5 = ((timeDiff/weeks)/3)*100;
					//3-4 semanas.La tos y las molestias en los senos nasales desaparecen.
					var valPb6 = ((timeDiff/weeks)/4)*100;
					//2-3 meses.La función pulmonar mejora un 5%.
					var valPb7 = ((timeDiff/months)/3)*100;
					//1 año.Se divide por dos el riesgo de padecer enfermedades cardiovasculares.
					var valPb8 = ((timeDiff/years)/1)*100;
					//2-3 años.Los riesgos de padecer neumonía o gripe son los mismos que los de un no fumador
					var valPb9 = ((timeDiff/years)/3)*100;
					//5 años.El riesgo de cáncer de garganta, esófago y vejiga se reduce a la mitad.
					var valPb10 = ((timeDiff/years)/5)*100;
					//5-10 años.Los riesgos de enfermedades cardiovasculares o trombosis son los mismos que los de los no fumadores.
					var valPb11 = ((timeDiff/years)/8)*100;
					//10 años.El riesgo de cáncer de pulmón se divide por dos
					var valPb12 = ((timeDiff/years)/10)*100;
					//15-20 años.El riesgo de padecer cáncer de pulmón, garganta, esófago o vejiga es el mismo que el de los no fumadores.
					var valPb13 = ((timeDiff/years)/15)*100;
					
					//console.log(valPb1);
				} 
				
				 TolitoProgressBar('pb1')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb1))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    TolitoProgressBar('pb2')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb2))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    TolitoProgressBar('pb3')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb3))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    TolitoProgressBar('pb4')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb4))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    
                    TolitoProgressBar('pb5')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb5))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    
                    TolitoProgressBar('pb6')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb6))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    
                    TolitoProgressBar('pb7')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb7))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    
                    TolitoProgressBar('pb8')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb8))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    
                    TolitoProgressBar('pb9')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb9))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    
                    TolitoProgressBar('pb10')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb10))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    
                    
                    TolitoProgressBar('pb11')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb11))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    
                    TolitoProgressBar('pb12')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb12))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
                    
                    
                    TolitoProgressBar('pb13')
                    .setOuterTheme('c')
                    .setInnerTheme('b')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(parsePercent(valPb13))
                    .setInterval(50)
                    .showCounter(true)
                    .logOptions()
                    .build();
		
	}
